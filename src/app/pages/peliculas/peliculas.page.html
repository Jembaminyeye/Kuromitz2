<ion-content>
<!-- Buscador visualmente mejorado -->
  <ion-searchbar
    [(ngModel)]="busqueda"
    (ionInput)="buscarPeliculas()"
    placeholder="üé• Buscar pel√≠culas..."
    showClearButton="focus"
    debounce="300"
    animated="true"
  ></ion-searchbar>

  <!-- Resultados de b√∫squeda -->
  <ion-card *ngIf="resultadosBusqueda.length">
    <ion-card-header color="light">
      <ion-card-title>Resultados de b√∫squeda</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="6" size-lg="4" *ngFor="let peli of resultadosBusqueda">
            <ion-card>
              <img
                *ngIf="peli.poster_path"
                [src]="'https://image.tmdb.org/t/p/w400' + peli.poster_path"
                alt="{{peli.title}}"
              />
              <ion-card-header>
                <ion-card-title>{{ peli.title }}</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <p>{{ peli.overview ? (peli.overview | slice:0:120) + '...' : 'Sin descripci√≥n disponible.' }}</p>
                <p *ngIf="peli.vote_average">‚≠ê {{ peli.vote_average }}</p>
                <ion-button
                  expand="block"
                  size="small"
                  color="success"
                  (click)="agregarAMiLista({
                    titulo: peli.title,
                    descripcion: peli.overview,
                    imagen: 'https://image.tmdb.org/t/p/w300' + peli.poster_path,
                    calificacion: peli.vote_average
                  })"
                >
                  Agregar a mi lista
                </ion-button>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>

  <!-- Si no hay resultados pero hay texto -->
  <div *ngIf="!resultadosBusqueda.length && busqueda.trim()">
    <ion-text color="medium">
      <p style="text-align: center; margin-top: 2rem;">üòï No se encontraron pel√≠culas con ese nombre.</p>
    </ion-text>
  </div>

  <!-- Secci√≥n principal de pel√≠culas -->
  <div class="peliculas-section">
    <h2>üì∫ Pel√≠culas</h2>
    <div class="peliculas-container">
      <div class="pelicula-card" *ngFor="let pelicula of peliculas">
        <img [src]="pelicula.imagen" alt="Imagen de {{pelicula.titulo}}" />
        <div class="info">
          <h3>{{ pelicula.titulo }}</h3>
          <p>‚≠ê {{ pelicula.calificacion }}</p>
          <button [routerLink]="['/resenas']">Rese√±ar</button>
          <button (click)="agregarAMiLista(pelicula)">Agregar a mi lista</button> 
        </div>
      </div>
    </div>
  </div>

  <!-- M√°s populares -->
  <div class="peliculas-section">
    <h2>üé¨ M√°s Populares</h2>
    <div class="peliculas-container">
      <div class="pelicula-card" *ngFor="let pelicula of populares">
        <img [src]="pelicula.imagen" alt="{{pelicula.titulo}}" />
        <div class="info">
          <h3>{{ pelicula.titulo }}</h3>
          <p>‚≠ê {{ pelicula.calificacion }}</p>
          <button [routerLink]="['/resenas']">Rese√±ar</button>
          <button (click)="agregarAMiLista(pelicula)">Agregar a mi lista</button> 
        </div>
      </div>
    </div>
  </div>

  <!-- Rom√°nticas -->
  <div class="peliculas-section">
    <h2>üíñ Rom√°nticas</h2>
    <div class="peliculas-container">
      <div class="pelicula-card" *ngFor="let pelicula of romanticas">
        <img [src]="pelicula.imagen" alt="{{pelicula.titulo}}" />
        <div class="info">
          <h3>{{ pelicula.titulo }}</h3>
          <p>‚≠ê {{ pelicula.calificacion }}</p>
          <button [routerLink]="['/resenas']">Rese√±ar</button>
          <button (click)="agregarAMiLista(pelicula)">Agregar a mi lista</button> 
        </div>
      </div>
    </div>
  </div>

  <!-- Terror -->
  <div class="peliculas-section">
    <h2>üëª Terror</h2>
    <div class="peliculas-container">
      <div class="pelicula-card" *ngFor="let pelicula of terror">
        <img [src]="pelicula.imagen" alt="{{pelicula.titulo}}" />
        <div class="info">
          <h3>{{ pelicula.titulo }}</h3>
          <p>‚≠ê {{ pelicula.calificacion }}</p>
          <button [routerLink]="['/resenas']">Rese√±ar</button>
          <button (click)="agregarAMiLista(pelicula)">Agregar a mi lista</button> 
        </div>
      </div>
    </div>
  </div>

</ion-content>

<ion-fab vertical="bottom" horizontal="end" slot="fixed">
  <ion-fab-button [routerLink]="['/mi-lista']" color="danger">
    <ion-icon name="list-outline"></ion-icon>
  </ion-fab-button>
</ion-fab>




<ion-content class="ion-padding" fullscreen>
  <!-- Formulario para publicar reseÃ±a -->
  <ion-card class="formulario-resena">
    <ion-card-header>
      <ion-card-title class="titulo-resena">ğŸ¬ Publicar nueva reseÃ±a</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <form (ngSubmit)="publicarResena()">
        <ion-item>
          <ion-label position="floating">ğŸ¬ TÃ­tulo</ion-label>
          <ion-input [(ngModel)]="nuevaResena.titulo" name="titulo" required></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">ğŸ­ GÃ©nero</ion-label>
          <ion-input [(ngModel)]="nuevaResena.genero" name="genero" required></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">â±ï¸ DuraciÃ³n (min)</ion-label>
          <ion-input type="number" [(ngModel)]="nuevaResena.duracion" name="duracion" required></ion-input>
        </ion-item>

        <!-- CalificaciÃ³n de 10 estrellas -->
        <ion-item lines="none">
          <ion-label>â­ CalificaciÃ³n</ion-label>
          <ion-buttons slot="end" class="estrellas">
            <ion-button
              *ngFor="let s of [1,2,3,4,5,6,7,8,9,10]"
              fill="clear"
              size="small"
              (click)="seleccionarEstrellas(s)"
            >
              <ion-icon
                [name]="nuevaResena.puntuacion >= s ? 'star' : 'star-outline'"
                color="warning"
              ></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-item>

        <ion-item>
          <ion-label position="floating">ğŸ—’ï¸ DescripciÃ³n</ion-label>
          <ion-textarea [(ngModel)]="nuevaResena.descripcion" name="descripcion" required></ion-textarea>
        </ion-item>

        <ion-button expand="block" type="submit" color="danger" class="ion-margin-top">
          Publicar reseÃ±a
        </ion-button>
      </form>
    </ion-card-content>
  </ion-card>

  <!-- Lista de reseÃ±as -->
  <div class="reseÃ±as-container">
    <h2 class="titulo-principal">ğŸ§¾ Ãšltimas ReseÃ±as</h2>

    <ng-container *ngIf="resenas.length > 0; else sinResenas">
      <div class="tarjeta-reseÃ±a" *ngFor="let resena of resenas">
        <div class="tarjeta-header">
          <div class="poster-placeholder">{{ resena.tituloCorto || 'ğŸ¬' }}</div>
          <div class="info-pelicula">
            <h3 class="titulo-pelicula">{{ resena.titulo }}</h3>
            <p class="genero-tiempo">{{ resena.genero }} Â· {{ resena.duracion }} min</p>
          </div>
          <div class="puntuacion">
            <ion-icon name="star" color="warning"></ion-icon>
            <span class="valor">{{ resena.puntuacion }}/10</span>
          </div>
        </div>

        <p class="descripcion">{{ resena.descripcion }}</p>

        <div class="etiquetas">
          <ion-chip *ngFor="let etiqueta of resena.etiquetas">
            <ion-label>{{ etiqueta }}</ion-label>
          </ion-chip>
        </div>

        <div class="autor">
          <div class="avatar">{{ resena.autorIniciales }}</div>
          <div class="detalle-autor">Por {{ resena.autor }} â€“ {{ resena.fecha }}</div>
        </div>
      </div>
    </ng-container>

    <ng-template #sinResenas>
      <p class="ion-text-center" style="margin-top: 20px;">ğŸ˜• No hay reseÃ±as aÃºn.</p>
    </ng-template>
  </div>
</ion-content>

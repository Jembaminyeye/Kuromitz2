<ion-content>
  <!-- Buscador con diseÃ±o moderno -->
  <ion-searchbar
    [(ngModel)]="busqueda"
    (ionInput)="buscarSeries()"
    placeholder="ğŸ” Buscar series..."
    showClearButton="focus"
    animated="true"
    debounce="300"
  ></ion-searchbar>

  <!-- Resultados de bÃºsqueda con mejor presentaciÃ³n -->
  <ion-card *ngIf="resultadosBusqueda.length">
    <ion-card-header color="light">
      <ion-card-title>Resultados de bÃºsqueda</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="6" size-lg="4" *ngFor="let serie of resultadosBusqueda">
            <ion-card>
              <img
                *ngIf="serie.poster_path"
                [src]="'https://image.tmdb.org/t/p/w300' + serie.poster_path"
                alt="{{serie.name}}"
              />
              <ion-card-header>
                <ion-card-title>{{ serie.name }}</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <p>{{ serie.overview ? (serie.overview | slice:0:120) + '...' : 'Sin descripciÃ³n disponible.' }}</p>
                <p *ngIf="serie.vote_average">â­ {{ serie.vote_average }}</p>
                <ion-button
                  expand="block"
                  size="small"
                  color="success"
                  (click)="agregarAMiLista({
                    titulo: serie.name,
                    descripcion: serie.overview,
                    imagen: 'https://image.tmdb.org/t/p/w400' + serie.poster_path,
                    calificacion: serie.vote_average
                  })"
                >
                  Agregar a mi lista
                </ion-button>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>

  <!-- Si no hay resultados pero hay texto -->
  <div *ngIf="!resultadosBusqueda.length && busqueda.trim()">
    <ion-text color="medium">
      <p style="text-align: center; margin-top: 2rem;">ğŸ˜• No se encontraron series con ese nombre.</p>
    </ion-text>
  </div>

  <!-- SecciÃ³n general de series -->
  <div class="series-section">
    <h2>ğŸ“º Series</h2>
    <div class="peliculas-container">
      <div class="pelicula-card" *ngFor="let serie of series">
        <img [src]="serie.imagen" alt="Imagen de {{serie.titulo}}" />
        <div class="info">
          <h3>{{ serie.titulo }}</h3>
          <p>â­ {{ serie.calificacion }}</p>
          <button [routerLink]="['/resenas']">ReseÃ±ar</button>
          <button (click)="agregarAMiLista(serie)">Agregar a mi lista</button> 
        </div>
      </div>
    </div>
  </div>

  <!-- MÃ¡s populares -->
  <div class="series-section">
    <h2>ğŸ”¥ MÃ¡s Populares</h2>
    <div class="peliculas-container">
      <div class="pelicula-card" *ngFor="let serie of populares">
        <img [src]="serie.imagen" alt="{{serie.titulo}}" />
        <div class="info">
          <h3>{{ serie.titulo }}</h3>
          <p>â­ {{ serie.calificacion }}</p>
          <button [routerLink]="['/resenas']">ReseÃ±ar</button>
          <button (click)="agregarAMiLista(serie)">Agregar a mi lista</button> 
        </div>
      </div>
    </div>
  </div>

  <!-- RomÃ¡nticas -->
  <div class="series-section">
    <h2>ğŸ’– RomÃ¡nticas</h2>
    <div class="peliculas-container">
      <div class="pelicula-card" *ngFor="let serie of romanticas">
        <img [src]="serie.imagen" alt="{{serie.titulo}}" />
        <div class="info">
          <h3>{{ serie.titulo }}</h3>
          <p>â­ {{ serie.calificacion }}</p>
          <button [routerLink]="['/resenas']">ReseÃ±ar</button>
          <button (click)="agregarAMiLista(serie)">Agregar a mi lista</button> 
        </div>
      </div>
    </div>
  </div>

  <!-- Terror -->
  <div class="series-section">
    <h2>ğŸ‘» Terror</h2>
    <div class="peliculas-container">
      <div class="pelicula-card" *ngFor="let serie of terror">
        <img [src]="serie.imagen" alt="{{serie.titulo}}" />
        <div class="info">
          <h3>{{ serie.titulo }}</h3>
          <p>â­ {{ serie.calificacion }}</p>
          <button [routerLink]="['/resenas']">ReseÃ±ar</button>
          <button (click)="agregarAMiLista(serie)">Agregar a mi lista</button> 
        </div>
      </div>
    </div>
  </div>
</ion-content>

<ion-fab vertical="bottom" horizontal="end" slot="fixed">
  <ion-fab-button [routerLink]="['/mi-lista']" color="danger">
    <ion-icon name="list-outline"></ion-icon>
  </ion-fab-button>
</ion-fab>